<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Finding intersecting geometries from custom data • cancensus</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Finding intersecting geometries from custom data">
<meta property="og:description" content="cancensus">
<meta property="og:image" content="https://mountainmath.github.io/cancensus/logo.png">
<meta property="og:image:alt" content="cancensus">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@vb_jens">
<meta name="twitter:site" content="https://mountainmath.github.io/cancensus/">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-107390160-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-107390160-3');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cancensus</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/cancensus.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Making_maps_with_cancensus.html">Making maps with cancensus</a>
    </li>
    <li>
      <a href="../articles/data_discovery.html">Data discovery</a>
    </li>
    <li>
      <a href="../articles/Dwellings_by_document_type_cross_tabulation.html">Additional datasets: Structural type of dwelling by document type</a>
    </li>
    <li>
      <a href="../articles/Taxfiler_Data.html">Additional datasets: Annual T1FF taxfiler data</a>
    </li>
    <li>
      <a href="../articles/intersecting_geometries.html">Finding intersecting geometries from custom data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mountainMath/cancensus/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="intersecting_geometries_files/header-attrs-2.5/header-attrs.js"></script><link href="intersecting_geometries_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="intersecting_geometries_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Finding intersecting geometries from custom data</h1>
            <h3 class="subtitle">Bring custom data and identify corresponding census geographies</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mountainMath/cancensus/blob/master/vignettes/intersecting_geometries.Rmd"><code>vignettes/intersecting_geometries.Rmd</code></a></small>
      <div class="hidden name"><code>intersecting_geometries.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mountainMath/cancensus">cancensus</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span></pre></div>
<p>One frequent use case in working with census data is to pull data for specific areas one is intersted in that don’t necessarily correspond to census boundaries that are known up-front. Users might already have geospatial data that cover the extent of an area of interest.</p>
<p>As an example, consider we are interested in understanding the tenure split in census tracts near skytrain stations in Vancouver. The <code>COV_SKYTRAIN_STATIONS</code> dataset that ships with the package is derived from the <a href="https://opendata.vancouver.ca/explore/dataset/rapid-transit-stations/information/">City of Vancouver Open Data portal</a> and contains their locations. We are interested in census tracts within 800m of these stations.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="va">cov_station_buffers</span> <span class="op">&lt;-</span> <span class="va">COV_SKYTRAIN_STATIONS</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_set_crs</a></span><span class="op">(</span><span class="fl">4326</span><span class="op">)</span> <span class="co"># needed for ubuntu with old GDAL</span></pre></div>
<p>We then use the <code>get_intersecting_geometries</code> call to obtain the list of municipalities (CSDs) and census tracts (CTs) within the 800m buffer.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>station_city_ids <span class="ot">&lt;-</span> <span class="fu">get_intersecting_geometries</span>(<span class="st">"CA16"</span>, <span class="at">level =</span> <span class="st">"CSD"</span>, <span class="at">geometry =</span> cov_station_buffers)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">39</span> B     </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">39</span> B     </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">39</span> B     </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">39</span> B     </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">39</span> B     </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">39</span> B</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>station_ct_ids <span class="ot">&lt;-</span> <span class="fu">get_intersecting_geometries</span>(<span class="st">"CA16"</span>, <span class="at">level =</span> <span class="st">"CT"</span>, <span class="at">geometry =</span> cov_station_buffers)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">800</span> B     </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">800</span> B     </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">800</span> B     </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">800</span> B     </span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">800</span> B     </span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">800</span> B</span></code></pre></div>
<p>These return a list of census geo identifiers suitable for use in the <code>get_census</code> ‘region’ argument.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>station_city <span class="ot">&lt;-</span>  <span class="fu">get_census</span>(<span class="st">"CA16"</span>, <span class="at">regions =</span> station_city_ids, <span class="at">geo_format =</span> <span class="st">'sf'</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">32</span> kB     </span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">32</span> kB     </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">32</span> kB     </span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">32</span> kB     </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">32</span> kB     </span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">32</span> kB</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>station_cts <span class="ot">&lt;-</span>   <span class="fu">get_census</span>(<span class="st">"CA16"</span>, <span class="at">regions =</span> station_ct_ids, <span class="at">geo_format =</span> <span class="st">'sf'</span>)</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="fl">3.6</span> kB     </span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="fl">3.6</span> kB     </span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="fl">7.6</span> kB     </span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="fl">7.6</span> kB     </span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">12</span> kB     </span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">12</span> kB     </span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">20</span> kB     </span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">20</span> kB     </span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">24</span> kB     </span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">24</span> kB     </span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">28</span> kB     </span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">28</span> kB     </span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">28</span> kB     </span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">28</span> kB     </span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">32</span> kB     </span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">32</span> kB     </span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">32</span> kB     </span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">32</span> kB     </span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">32</span> kB     </span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">32</span> kB     </span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">36</span> kB     </span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">36</span> kB     </span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">37</span> kB     </span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">37</span> kB     </span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">40</span> kB     </span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">40</span> kB     </span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">41</span> kB     </span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">41</span> kB     </span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">41</span> kB     </span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">41</span> kB     </span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">41</span> kB     </span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">41</span> kB</span></code></pre></div>
<p>To understand how these relate we plot the data.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">station_city</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>fill<span class="op">=</span><span class="cn">NA</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">station_cts</span>,fill<span class="op">=</span><span class="st">"steelblue"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">cov_station_buffers</span>,fill<span class="op">=</span><span class="st">"brown"</span>,alpha<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">coord_sf</a></span><span class="op">(</span>datum<span class="op">=</span><span class="cn">NA</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"CTs covered by City of Vancouver skytrain station catchments"</span>,
       caption<span class="op">=</span><span class="st">"StatCan Census 2016"</span><span class="op">)</span></pre></div>
<p><img src="intersecting_geometries_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>To get a closer match we can cut out the dissemination areas intersecting the station catchemnts.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>station_das <span class="ot">&lt;-</span>   <span class="fu">get_intersecting_geometries</span>(<span class="st">"CA16"</span>, <span class="at">level =</span> <span class="st">"DA"</span>, <span class="at">geometry =</span> cov_station_buffers) <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_census</span>(<span class="st">"CA16"</span>, <span class="at">regions =</span> ., <span class="at">geo_format =</span> <span class="st">'sf'</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="fl">3.9</span> kB     </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="fl">3.9</span> kB     </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="fl">3.9</span> kB     </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="fl">3.9</span> kB     </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="fl">3.9</span> kB     </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="fl">3.9</span> kB     </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="fl">3.6</span> kB     </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="fl">3.6</span> kB     </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="fl">7.6</span> kB     </span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="fl">7.6</span> kB     </span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">12</span> kB     </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">12</span> kB     </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">12</span> kB     </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">12</span> kB     </span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">12</span> kB     </span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">12</span> kB     </span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">16</span> kB     </span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">20</span> kB     </span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">20</span> kB     </span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">24</span> kB     </span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">24</span> kB     </span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">28</span> kB     </span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">28</span> kB     </span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">32</span> kB     </span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">32</span> kB     </span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">36</span> kB     </span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">36</span> kB     </span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">37</span> kB     </span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">37</span> kB     </span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">40</span> kB     </span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">40</span> kB     </span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">40</span> kB     </span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">40</span> kB     </span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">40</span> kB     </span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">40</span> kB     </span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">44</span> kB     </span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">44</span> kB     </span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">44</span> kB     </span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">44</span> kB     </span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">44</span> kB     </span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">44</span> kB     </span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">48</span> kB     </span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">48</span> kB     </span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">48</span> kB     </span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">48</span> kB     </span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">52</span> kB     </span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">52</span> kB     </span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">56</span> kB     </span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">56</span> kB     </span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">56</span> kB     </span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">56</span> kB     </span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">60</span> kB     </span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">60</span> kB     </span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">64</span> kB     </span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">64</span> kB     </span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">68</span> kB     </span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">68</span> kB     </span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">72</span> kB     </span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">72</span> kB     </span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">73</span> kB     </span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">73</span> kB     </span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">76</span> kB     </span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">76</span> kB     </span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">80</span> kB     </span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">80</span> kB     </span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">84</span> kB     </span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">84</span> kB     </span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">84</span> kB     </span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">84</span> kB     </span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">84</span> kB     </span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>Downloading<span class="sc">:</span> <span class="dv">84</span> kB</span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(station_city) <span class="sc">+</span></span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">fill=</span><span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>station_das,<span class="at">fill=</span><span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>cov_station_buffers,<span class="at">fill=</span><span class="st">"brown"</span>,<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum=</span><span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"DAs covered by City of Vancouver skytrain station catchments"</span>,</span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">"StatCan Census 2016"</span>)</span></code></pre></div>
<p><img src="intersecting_geometries_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>We could have requested census variables of interest to better understand the neighbourhood of the skytrain stations. Or we might want to esimate values of census variables within station catchments, in which case the <code>tongfen_estimate</code> method of the <a href="https://mountainmath.github.io/tongfen/index.html"><code>tongfen</code> package</a> might be useful.</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://mountainmath.ca">Jens von Bergmann</a>, <a href="https://dshkol.com">Dmitry Shkolnik</a>, Aaron Jacobs.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
